tosca_definitions_version: tosca_simple_yaml_1_3

description:  TOSCA aeriOS application running two components. One for arm64 (5g-vehicle) and an amd64

node_templates:
  5g-vehicle:
    type: tosca.nodes.Container.Application
    requirements:
      - host:
          node_filter:
            properties:
              id: "urn:ngsi-ld:InfrastructureElement:pi"
      - network:
          properties:
            ports:
              uvicorn_port:
                properties:
                  protocol: [tcp]
                  source: 8000
    artifacts:
      5g_vehicle_component_image:
        file: registry.gitlab.aeriOS-project.eu/aeriOS-public/midterm-demo/5g_vehicle:latest
        type: tosca.artifacts.Deployment.Image.Container.Docker
        repository: ''
    interfaces:
      Standard:
        create:
          implementation: 5g_vehicle_component_image
          inputs:
            envVars:
              - CB_URL: http://orion-orion-ld-broker.default.svc.cluster.local:1026
              - KRAKEND: false